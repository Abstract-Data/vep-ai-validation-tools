name: Auto-Label PRs

on:
  pull_request:
    types: [opened, synchronize, reopened, labeled, unlabeled]

jobs:
  auto-label:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          ref: ${{ github.head_ref }}

      - name: Auto-Label PR
        uses: actions/labeler@v5
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          sync-labels: true

      - name: Create Label Summary
        if: always()
        run: |
          echo "## ðŸ·ï¸ Auto-Label Summary" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**PR:** #${{ github.event.pull_request.number }}" >> $GITHUB_STEP_SUMMARY
          echo "**Title:** ${{ github.event.pull_request.title }}" >> $GITHUB_STEP_SUMMARY
          echo "**Author:** @${{ github.event.pull_request.user.login }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### Actions Taken:" >> $GITHUB_STEP_SUMMARY
          echo "- âœ… Analyzed changed files" >> $GITHUB_STEP_SUMMARY
          echo "- âœ… Applied automatic labels" >> $GITHUB_STEP_SUMMARY
          echo "- âœ… Synchronized labels" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### Available Labels:" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ **python** - Python code changes" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ“š **documentation** - Documentation updates" >> $GITHUB_STEP_SUMMARY
          echo "- âš™ï¸ **config** - Configuration files" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ”§ **ci** - GitHub Actions workflows" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ“¦ **dependencies** - Package dependencies" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ§ª **testing** - Test files and updates" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ”’ **security** - Security-related changes" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ–¥ï¸ **server** - Server and API files" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ› ï¸ **tools** - Tools and utilities" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ“Š **data** - Data and models" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸŒ **web-scraping** - Web scraping and browser automation" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ“ **file-management** - File management and search" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ§  **ai-ml** - AI and machine learning" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ–¼ï¸ **media** - Screenshots and media files" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ—„ï¸ **database** - Database and storage" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ“ **logging** - Logging and monitoring" >> $GITHUB_STEP_SUMMARY
          echo "- âš ï¸ **error-handling** - Error handling and diagnostics" >> $GITHUB_STEP_SUMMARY
          echo "- âš¡ **performance** - Performance and optimization" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ’¥ **breaking** - Breaking changes" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ› **bug** - Bug fixes" >> $GITHUB_STEP_SUMMARY
          echo "- âœ¨ **feature** - New features" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ”„ **refactor** - Code refactoring" >> $GITHUB_STEP_SUMMARY
